#region Prolog
#API Key Openweathermap
vApikey_weather = '2b1be39504478192f8b1415d4b2628d1';

#Récupérons les données nécessaire pour la ville de Toulouse
vCityname = 'Toulouse';
vLocation = 'http://api.openweathermap.org/geo/1.0/direct?q='|vCityname|'&appid='|vApikey_weather;

ExecuteHttpRequest( 'GET', vLocation);
sResponseBody  = HttpResponseGetBody();

nGetlon = SCAN( '"lon":' , sResponseBody); 
nGetlat = SCAN( '"lat":', sResponseBody );

sGetlon = SUBST( sResponseBody, nGetlon , nGetlon - nGetlon );
sGetlat = SUBST( sResponseBody , nGetlat, 6 );


ASCIIOutput('/Output/CCE_GET.json', sGetlon );


# ExecuteHttpRequest( 'GET', 'https://api.openweathermap.org/data/2.5/weather?lat=44.34&lon=10.99&appid='|vApikey_weather);

# vResponseBody  = HttpResponseGetBody();

# ASCIIOutput('/Output/CCE_POST.json', vResponseBody );
#endregion